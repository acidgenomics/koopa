#!/usr/bin/env bash

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd -P)"
# shellcheck source=/dev/null
. "${script_dir}/shell/bash/include/header.sh"

uninstall() {
    # """
    # Uninstall koopa.
    # @note Updated 2020-07-02.
    # """
    local koopa_prefix
    koopa_prefix="$(koopa::prefix)"
    # Remove shared activation script.
    if koopa::is_shared_install
    then
        rm -fv "/etc/profile.d/zzz-koopa.sh"
    fi
    koopa::uninstall_dotfiles
    koopa::uninstall_dotfiles_private
    rm -frv "$(koopa::config_prefix)"
    rm -frv "$koopa_prefix"
    printf "Uninstallation of koopa was successful.\n"
    printf "Restart the shell.\n"
    return 0
}

uninstall "$@"
