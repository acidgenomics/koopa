#!/usr/bin/env bash
set -Eeu -o pipefail

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${script_dir}/../include/header.sh"

# """
# Potentially useful flags:
# > apk add --no-cache --virtual .build-dependencies
# """

name_fancy="Alpine base system"

_koopa_install_start "$name_fancy"

sudo apk update
sudo apk upgrade

packages=(
    # pandoc
    # pandoc-citeproc
    # fish
    # texlive
    # zsh
    .build-dependencies
    R
    R-dev
    R-doc
    autoconf
    bash
    bash-completion
    build-base
    ca-certificates
    curl
    dpkg
    gettext
    git
    libevent-dev
    libffi-dev
    mdocml
    openssl
    shadow
    sudo
    tcl
    tree
    wget
)
sudo apk add --no-cache --virtual "${packages[@]}"

# Conda requires glibc, but alpine uses musl libc.
install-glibc

_koopa_install_success "$name_fancy"
