#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header fedora)"

# Install R.
# Updated 2019-07-09.

# Using TeX Live 2013, we'll see this warning:
#
#     configure: WARNING: neither inconsolata.sty nor zi4.sty found: PDF
#     vignettes and package manuals will not be rendered optimally

# Missing recommendations:
# - texlive-csvsimple
# - texlive-fonts-extra
# - texlive-inconsolata
# - texlive-marginfix
# - texlive-mathtools
# - texlive-nowidow
# - texlive-parnotes

# There doesn't appear to be an easy way to fix these issues on RHEL 7 or 8.

os_type="$(koopa os-type)"

_koopa_assert_is_installed java
_koopa_assert_is_installed javac
_koopa_assert_is_installed tex

# This requires EPEL7.
if _koopa_has_sudo && [[ "$os_type" == "rhel7" ]]
then
    sudo yum -y install R
    sudo yum-builddep -y R
fi

# shellcheck source=/dev/null
source "$(_koopa_cellar_script r)"
