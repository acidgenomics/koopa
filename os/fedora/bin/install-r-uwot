#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header bash)"



# Usage                                                                     {{{1
# ==============================================================================

usage() {
cat << EOF
$(_koopa_help_header)

Install uwot R package on RStudio Server Pro.

$(_koopa_help_args)

details:
    Fails unless we define full path explicitly to INSTALL.

see also:
    - https://github.com/jlmelville/uwot
    - https://github.com/jlmelville/uwot/issues/32

note:
    Bash script.
    Updated 2019-09-25.
EOF
}

_koopa_help "$@"



# Script                                                                    {{{1
# ==============================================================================

name="uwot"
tmp_dir="$(_koopa_tmp_dir)/${name}"
r_home="$(_koopa_r_home)"
install_exe="${r_home}/bin/INSTALL"
_koopa_assert_is_executable "$install_exe"

(
    rm -fr "$tmp_dir"
    mkdir -p "$tmp_dir"
    cd "$tmp_dir" || exit 1
    download-cran-latest "$name"
    "$install_exe" "$name"*".tar.gz"
    rm -fr "$tmp_dir"
)
