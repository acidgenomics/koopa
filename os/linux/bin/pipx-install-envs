#!/usr/bin/env bash
set -Eeu -o pipefail

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${script_dir}/../include/header.sh"

_koopa_assert_has_no_envs
_koopa_assert_is_installed pipx python3

_koopa_message "Installing pipx virtual environments."
_koopa_note "PIPX_BIN_DIR: ${PIPX_BIN_DIR}"

mkdir -pv "$PIPX_BIN_DIR"
_koopa_add_to_path_start "$PIPX_BIN_DIR"

envs=(
    black
    flake8
    pyflakes
    pylint
    pytest
)

# Can pass '--force' flag here to force reinstall.
for env in "${envs[@]}"
do
    pipx install --force "$env"
done

