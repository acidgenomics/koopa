#!/usr/bin/env Rscript

args <- commandArgs(trailingOnly = FALSE)
whichFile <- grep(pattern = "--file", x = args)
file <- args[whichFile]
file <- sub(pattern = "^--file=", replacement = "", x = file)
koopaPrefix <- normalizePath(dirname(dirname(file)))
source(file.path(koopaPrefix, "lang", "r", "include", "header.R"))

stopifnot(
    requireNamespace("acidbase", quietly = TRUE),
    requireNamespace("syntactic", quietly = TRUE)
)

prefix <- FALSE
recursive <- FALSE
strict <- FALSE

args <- acidbase::parseArgs(
    positional = TRUE,
    validFlags = c("prefix", "recursive", "strict")
)

if ("--prefix" %in% args) {
    prefix <- TRUE
}
if ("--recursive" %in% args) {
    recursive <- TRUE
}
if ("--strict" %in% args) {
    strict <- TRUE
}

syntactic::camelCase(
    object = acidbase::positionalArgs(),
    rename = TRUE,
    recursive = recursive,
    strict = strict,
    prefix = prefix
)
