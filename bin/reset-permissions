#!/usr/bin/env bash

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd -P)"
# shellcheck source=/dev/null
source "${script_dir}/../shell/bash/include/header.sh"

user="$(_koopa_current_user)"
group="$(_koopa_current_group)"

dir="${1:-"."}"

chown -R "${user}:${group}" "$dir"

find "$dir" -type d -print0 | \
    xargs -0 -I {} chmod u=rwx,g=rwx,o=rx {}
find "$dir" -type f -print0 | \
    xargs -0 -I {} chmod u=rw,g=rw,o=r {}
find "$dir" -name "*.sh" -type f -print0 | \
    xargs -0 -I {} chmod u=rwx,g=rwx,o=rx {}
