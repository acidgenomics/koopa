#!/usr/bin/env bash

KOOPA_PREFIX="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." \
    >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${KOOPA_PREFIX}/shell/bash/include/header.sh"

user="$(id -u)"
group="$(id -g)"

dir="${1:-"."}"

chown -R "${user}:${group}" "$dir"

find "$dir" -type d -print0 | \
    xargs -0 -I {} chmod u=rwx,g=rwx,o=rx {}
find "$dir" -type f -print0 | \
    xargs -0 -I {} chmod u=rw,g=rw,o=r {}
find "$dir" -name "*.sh" -type f -print0 | \
    xargs -0 -I {} chmod u=rwx,g=rwx,o=rx {}
