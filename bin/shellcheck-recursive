#!/usr/bin/env bash

# shellcheck source=/dev/null
source "$(koopa header bash)"

# Recursively run shellcheck on all scripts in a directory.
# Modified 2019-06-23.

_koopa_assert_is_installed shellcheck

path="${1:-$PWD}"

# Legacy method:
# > find "$path" -name "*.sh" -exec shellcheck {} \;

# This step recursively grep matches files with regular expressions.
# Here we're checking for the shebang, rather than relying on file extension.
grep -Elr '#!/usr/bin/env (ba)?sh' "$path" | xargs -I {} shellcheck {}
