#!/usr/bin/env bash

# shellcheck source=/dev/null
source "$(koopa header bash)"

# Global find and replace in files using sed.
# Updated 2019-06-23.

from="$1"
to="$2"

# Check for unescaped slashes.
if echo "$from" | grep -q "/" && echo "$from" | grep -Fqv "\\"
then
    >&2 printf "Error: Unescaped '/' detected: %s\n" "$from"
    exit 1
elif echo "$to" | grep -q "/" && echo "$to" | grep -Fqv "\\"
then
    >&2 printf "Error: Unescaped '/' detected: %s\n" "$to"
    exit 1
fi

find . -maxdepth 1 -type f -exec sed -i "s/${from}/${to}/g" {} \;
