#!/usr/bin/env bash

KOOPA_HOME="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." \
    >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${KOOPA_HOME}/shell/bash/include/header.sh"
_koopa_assert_has_no_args "$@"

prefix="$(_koopa_make_prefix)/ensembl"

(
    _koopa_prefix_mkdir "$prefix"
    cd "$prefix" || exit 1
    # Install BioPerl.
    git clone -b release-1-6-924 --depth 1 \
        "https://github.com/bioperl/bioperl-live.git"
    git clone "https://github.com/Ensembl/ensembl-git-tools.git"
    git clone "https://github.com/Ensembl/ensembl.git"
    git clone "https://github.com/Ensembl/ensembl-variation.git"
    git clone "https://github.com/Ensembl/ensembl-funcgen.git"
    git clone "https://github.com/Ensembl/ensembl-compara.git"
    git clone "https://github.com/Ensembl/ensembl-io.git"
)

_koopa_set_permissions "$prefix"

_koopa_message "Ensembl API installed correctly."
_koopa_note "Reload the current shell."
