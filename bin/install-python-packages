#!/usr/bin/env bash
set -Eeu -o pipefail

KOOPA_PREFIX="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." \
    >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${KOOPA_PREFIX}/shell/bash/include/header.sh"

# """
# Potential defaults:
# - awscli (v1.17)
# - numpy
# - pandas
# """

_koopa_assert_has_no_envs
_koopa_assert_is_installed python3

_koopa_h1 "Installing Python packages."
_koopa_dl "Site library" "$(_koopa_python_site_packages_prefix)"

_koopa_install_pip

pkgs=(
    black
    flake8
    logbook
    pipx
    pyflakes
    pylint
    pytest
    setuptools
    six
    wheel
)

_koopa_dl "Packages" "$(_koopa_to_string "${pkgs[@]}")"

python3 -m pip install \
    --no-warn-script-location \
    "${pkgs[@]}"

_koopa_python_remove_pycache
_koopa_is_cellar python3 && _koopa_link_cellar python
