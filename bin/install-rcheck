#!/usr/bin/env bash
set -Eeu -o pipefail

KOOPA_PREFIX="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." \
    >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${KOOPA_PREFIX}/shell/bash/include/header.sh"
_koopa_assert_has_no_args "$@"

source_repo="git@github.com:acidgenomics/Rcheck.git"
config_dir="$(_koopa_config_prefix)"
clone_dir="${config_dir}/Rcheck"
link_name=".Rcheck"

if [[ ! -d "$clone_dir" ]]
then
    rm -frv "$clone_dir"
    git clone "$source_repo" "$clone_dir"
fi

# Add symlink in current working directory.
ln -fnsv "$clone_dir" "$link_name"
