#!/usr/bin/env bash
set -Eeuxo pipefail

echo "Updating R Java configuration."

# R CMD javareconf -h

# Environment variables that can be used to influence the detection:
#   JAVA           path to a Java interpreter executable
#                  By default first 'java' command found on the PATH
#                  is taken (unless JAVA_HOME is also specified).
#   JAVA_HOME      home of the Java environment. If not specified,
#                  it will be detected automatically from the Java
#                  interpreter.
#   JAVAC          path to a Java compiler
#   JAVAH          path to a Java header/stub generator
#   JAR            path to a Java archive tool

java_dir="/usr/lib/jvm/java"
java_flags=" \
    JAVA=${java_dir}/bin/java \
    JAVA_HOME=${java_dir} \
    JAVAC=${java_dir}/bin/javac \
    JAR=${java_dir}/bin/jar \
"
sudo R CMD javareconf $java_flags
# R CMD javareconf $java_flags

yum list installed | grep -E '^java-'

echo "Reinstall the rJava package."
