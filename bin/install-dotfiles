#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header bash)"

# Install dot files.
# Updated 2019-08-26.

# Defaults to the Acid Genomics dotfiles repo.
repo="${1:-git@github.com:acidgenomics/dotfiles.git}"
dest_dir="$(_koopa_home)/dotfiles"

if [[ -d "$dest_dir" ]]
then
    printf "Dot files already exist at: '%s'.\n" "$dest_dir"
    exit 0
elif [[ -L "$dest_dir" ]]
then
    # This will take care of legacy symlinks created by koopa.
    rm -frv "$dest_dir"
fi

git clone --recursive "$repo" "$dest_dir"
