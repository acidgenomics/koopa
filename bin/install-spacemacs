#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header bash)"

# Install spacemacs.
# Updated 2019-09-20.

name="spacemacs"
repo="https://github.com/syl20bnr/spacemacs.git"

emacs_home="${HOME}/.emacs.d"
install_dir="${emacs_home}-${name}"

# FIXME Switch to assert
if [[ -d "$install_dir" ]]
then
    >&2 printf "Error: Directory exists: '%s'.\n" "$install_dir"
    exit 1
fi

git clone "$repo" "$install_dir"
link-emacs "$name"

emacs --no-window-system
