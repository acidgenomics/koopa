#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header bash)"

# Rename files using a CSV file.
# Updated 2019-06-23.

# Check for CSV file.
file="$1"

if [[ ! -f "$file" ]]
then
    >&2 printf "Error: %s does not exist.\n" "$file"
    exit 1
fi

if [[ ! "$file" =~ .csv ]]
then
    >&2 printf "Error: %s is not a CSV file.\n" "$file"
    exit 1
fi

while read -r line
do
    from=${line%,*}
    to=${line#*,}
    mv "$from" "$to"
done < "$file"
