#!/usr/bin/env bash

KOOPA_HOME="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." \
    >/dev/null 2>&1 && pwd -P)"
# shellcheck source=/dev/null
source "${KOOPA_HOME}/shell/bash/include/header.sh"
_acid_assert_has_args "$@"

repo="$1"

tarball_url="$( \
    curl -s "https://api.github.com/repos/${repo}/releases/latest" | \
    grep "tarball_url" | \
    cut -d : -f 2,3 | \
    tr -d ' ,"' \
)"
tag="$(basename "$tarball_url")"
_acid_download "$tarball_url" "${tag}.tar.gz"
