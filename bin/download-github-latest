#!/usr/bin/env bash

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd -P)"
# shellcheck source=/dev/null
source "${script_dir}/../shell/bash/include/header.sh"

_koopa_assert_has_args "$@"

repo="$1"

tarball_url="$( \
    curl -s "https://api.github.com/repos/${repo}/releases/latest" | \
    grep "tarball_url" | \
    cut -d : -f 2,3 | \
    tr -d ' ,"' \
)"
tag="$(basename "$tarball_url")"
_koopa_download "$tarball_url" "${tag}.tar.gz"
