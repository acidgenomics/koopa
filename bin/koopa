#!/usr/bin/env bash

# koopa shell bootloader
# (c) 2018 Michael Steinbaugh
# This software is provided under an MIT License.

# Don't reload for HPC interactive job.
if [[ -n "$HPC_INTERACTIVE_JOB" ]]; then
    exit 0
fi

export KOOPA_VERSION="0.2.0"
export KOOPA_DATE="2018-09-22"
export KOOPA_BINDIR="$( dirname "${BASH_SOURCE[0]}" )"
export KOOPA_BASEDIR="$( dirname "$KOOPA_BINDIR" )"
export KOOPA_SYSDIR="${KOOPA_BASEDIR}/system"

CMD="$1"

if [[ "$CMD" == "activate" ]]; then
    source "${KOOPA_SYSDIR}/activate.sh"
elif [[ "$CMD" == "info" ]]; then
    source "${KOOPA_SYSDIR}/info.sh"
elif [[ "$CMD" == "list" ]]; then
    source "${KOOPA_SYSDIR}/list.sh"
else
    echo "koopa args: activate, info, list"
    exit 1
fi

unset -v CMD
