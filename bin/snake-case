#!/usr/bin/env Rscript

args <- commandArgs()
whichFile <- grep(pattern = "--file", x = args)
file <- args[whichFile]
file <- sub(pattern = "^--file=", replacement = "", x = file)
koopaPrefix <- normalizePath(file.path(dirname(file), ".."))
source(file.path(koopaPrefix, "lang", "r", "include", "header.R"))

#' Rename files in snake case
#'
#' @note Updated 2020-08-09.
#' @noRd
snakeCase <- function() {
    requireNamespaces("syntactic")
    args <- parseArgs(
        flags = c("prefix", "recursive"),
        positionalArgs = TRUE
    )
    posArgs <- args[["positionalArgs"]]
    prefix <- "prefix" %in% args[["flags"]]
    recursive <- "recursive" %in% args[["flags"]]
    syntactic::snakeCase(
        object = posArgs,
        rename = TRUE,
        recursive = recursive,
        prefix = prefix
    )
}

snakeCase()
