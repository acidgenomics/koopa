#!/usr/bin/env bash

KOOPA_PREFIX="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." &>/dev/null && pwd -P)"
# shellcheck source=/dev/null
source "${KOOPA_PREFIX}/shell/bash/include/header.sh"

_koopa_assert_has_args "$@"

for file in "$@"
do
    target_dir="$(_koopa_stat_modified "$file" '%Y/%m/%d')"
    mkdir -pv "$target_dir"
    target_file="${target_dir}/$(basename "$file")"
    mv -v "$file" "$target_file"
done
