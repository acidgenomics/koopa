#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header bash)"

# Install Doom Emacs.
# Updated 2019-09-20.

install_dir="${HOME}/.emacs.d"
exe_file="${install_dir}/bin/doom"

if [[ -d "$install_dir" ]]
then
    >&2 printf "Error: Directory exists: '%s'.\n" "$install_dir"
    exit 1
fi

git clone https://github.com/hlissner/doom-emacs "$install_dir"
"${exe_file}" quickstart
"${exe_file}" doctor

# Refresh config periodically:
# > "${exe_file}" refresh
