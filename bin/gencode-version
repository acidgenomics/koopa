#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(koopa header bash)"

# GENCODE release version.
# Updated 2019-09-20.

# Note that the FTP server can list releases that are in development ahead of
# the public release listed on the website, so scrape the HTML instead.

_koopa_assert_is_installed wget

# Human.
url="https://www.gencodegenes.org/human/"
human="$( \
    wget -q -O - "$url" | \
    grep -Eo "Release [0-9]+" | \
    head -n 1 | \
    cut -d ' ' -f 2 \
)"
printf "human: %s\n" "$human"

# Mouse.
url="https://www.gencodegenes.org/mouse/"
mouse="$( \
    wget -q -O - "$url" | \
    grep -Eo "Release M[0-9]+" | \
    head -n 1 | \
    cut -d ' ' -f 2 \
)"
printf "mouse: %s\n" "$mouse"

