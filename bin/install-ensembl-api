#!/usr/bin/env bash
set -Eeu -o pipefail

# shellcheck source=/dev/null
source "$(_koopa_header bash)"

# Install Ensembl API.
# Updated 2019-06-23.

# See also:
# - https://useast.ensembl.org/info/docs/api/api_installation.html
# - https://useast.ensembl.org/info/docs/api/api_git.html
# - https://github.com/Ensembl/ensembl-git-tools/blob/master/README.md

prefix="$(_koopa_build_prefix)/ensembl"

(
    build_mkdir "$prefix"
    cd "$prefix" || exit 1
    
    # Install BioPerl.
    git clone -b release-1-6-924 --depth 1 \
        https://github.com/bioperl/bioperl-live.git

    git clone https://github.com/Ensembl/ensembl-git-tools.git
    
    # > git ensembl --clone api
    
    git clone https://github.com/Ensembl/ensembl.git
    git clone https://github.com/Ensembl/ensembl-variation.git
    git clone https://github.com/Ensembl/ensembl-funcgen.git
    git clone https://github.com/Ensembl/ensembl-compara.git
    git clone https://github.com/Ensembl/ensembl-io.git
    
    build_chgrp "$prefix"
)

cat << EOF
Ensembl API installed correctly.
Reload the current shell.
EOF
